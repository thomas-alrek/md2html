<html>
    <head>
        <link rel="stylesheet" href="css/reset.css">
        <link rel="stylesheet" href="css/style.css">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">
        <link rel="stylesheet" href="node_modules/github-markdown-css/github-markdown.css">
    </head>
    <body>
        <h1 id="header">md2html</h1>
        <div class="editor-toolbar">
            <a title="Bold (Ctrl-B)" tabindex="-1" class="fa fa-bold"></a>
            <a title="Italic (Ctrl-I)" tabindex="-1" class="fa fa-italic"></a>
            <a title="Heading (Ctrl-H)" tabindex="-1" class="fa fa-header active"></a>
            <i class="separator">|</i>
            <a title="Quote (Ctrl-')" tabindex="-1" class="fa fa-quote-left"></a>
            <a title="Generic List (Ctrl-L)" tabindex="-1" class="fa fa-list-ul"></a>
            <a title="Numbered List (Ctrl-Alt-L)" tabindex="-1" class="fa fa-list-ol"></a>
            <i class="separator">|</i>
            <a title="Create Link (Ctrl-K)" tabindex="-1" class="fa fa-link"></a>
            <a title="Insert Image (Ctrl-Alt-I)" tabindex="-1" class="fa fa-picture-o"></a>
            <i class="separator">|</i>
            <a title="Toggle Preview (Ctrl-P)" tabindex="-1" class="fa fa-eye no-disable"></a>
            <a title="Toggle Side by Side (F9)" tabindex="-1" class="fa fa-columns no-disable no-mobile"></a>
            <a title="Toggle Fullscreen (F11)" tabindex="-1" class="fa fa-arrows-alt no-disable no-mobile"></a>
            <i class="separator">|</i>
            <a title="Markdown Guide" tabindex="-1" class="fa fa-question-circle" href="https://simplemde.com/markdown-guide" target="_blank"></a>
        </div>
        <div id="wrapper">
            <textarea id="source" disabled></textarea><div id="output" class="markdown-body"></div>
        </div>
        
        <script src="src/md2html.js"></script>
        <script>
            var source = document.getElementById("source");
            var output = document.getElementById("output");

            var xhr = new XMLHttpRequest();
            xhr.open('GET', 'https://raw.githubusercontent.com/thomas-alrek/md2html/master/README.md');
            xhr.onload = function() {
                if (xhr.status === 200) {
                    response = xhr.responseText;
                    source.disabled = false;
                    source.value = response;
                    output.innerHTML = md2html(response);
                }else {
                    alert('Request failed.  Returned status of ' + xhr.status);
                }
            };
            xhr.send();

            source.addEventListener("keyup", function(){
            output.innerHTML = md2html(source.value); 
            }), false;
        </script>
    </body>
</html>